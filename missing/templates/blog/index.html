{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Missing Persons{% endblock %}</h1>
  {% if g.user %}
    <a class="action" href="{{ url_for('blog.create') }}">New</a>
  {% endif %}
{% endblock %}

{% block content %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<!-- <link rel="stylesheet" href="{{ url_for('static', filename='node_modules/@fortawesome/fontawesome-free/css/all.min.css') }}"> -->
<div>
  <form class="search-container" action="{{ url_for('blog.search') }}" method="POST">
    <div>
    <input type="text" placeholder="Search..." name="query" class="search-input">
    <button type="button" class="btn" id="clear-btn" aria-label="Clear search">
      <i class="fas fa-search"></i>
            </button>
  </div>
    <button type="submit" class="search-button">
      <i class="fas fa-times-circle">Find</i>
    </button>
  </form>
</div>
{% for post in posts %}
  <div class="row-container">  
      <article class="post">
        <header></header>
          <p class="about">by {{ post['email'] }} on {{ post['created'].strftime('%Y-%m-%d') }}</p>
            {% if g.user['id'] == post['finder_id'] %}
              <a class="action" href="{{ url_for('blog.update', id=post['id']) }}">Edit</a>
            {% endif %}
            
            {% if post['status'] == 'active' %}
            <p class="miss">MISSING</p>
             {% elif  post['status'] == 'resolved' %}
             <p class="miss">Found</p>
             {% endif %}
              
          {% if post['photo_url'] %}
            <img src="{{ url_for('static', filename='uploads/' + post['photo_url']) }}" alt="{{ post['missed_name'] }} photo">
          {% endif %}
          <h2>{{ post['missed_name'] }}</h2>
          <ul>
            <li><strong>Gender:- </strong>{{ post['gender'] }}</li>
            <li><strong>Age:- </strong>{{ post['age'] }}</li>
            <li><strong>Missing since:- </strong>{{ post['since'] }}</li>
            <li><strong>Last seen:- </strong>{{ post['missing_from'] }}</li>
            <li><strong>Call on:- </strong>{{ post['call_on'] }}</li>
            <li><strong>Additional info:- </strong>{{ post['additional_info']}}</li>
          </ul>
      </article>
    </div>
    {% if not loop.last %}
      <hr>
    {% endif %}
  {% endfor %}

{% endblock %}
